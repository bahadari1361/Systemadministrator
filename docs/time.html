<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pro Trading Dashboard | BahadariTech</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

<style>
  /* Reset + base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    background: #0e1217;
    color: #e1e6eb;
    font-family: 'Inter', sans-serif;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    padding: 1.5rem 2rem;
    background: linear-gradient(90deg, #005bea, #00c6fb);
    text-align: center;
    color: #fff;
    font-weight: 700;
    font-size: 1.8rem;
    letter-spacing: 1px;
    box-shadow: 0 4px 10px rgba(0, 198, 251, 0.3);
  }
  main {
    flex: 1;
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }
  .grid {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
  }
  .card {
    background: #1f2733;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgb(0 198 251 / 0.15);
    padding: 1.8rem 2rem;
    flex: 1 1 320px;
    min-width: 300px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  h2 {
    font-weight: 700;
    margin: 0 0 0.8rem 0;
    color: #00c6fb;
  }
  .time {
    font-size: 2.8rem;
    font-weight: 700;
    letter-spacing: 0.08em;
    margin-bottom: 0.2rem;
  }
  .date {
    font-size: 1rem;
    color: #8ca3b9;
    margin-bottom: 1rem;
  }
  .status {
    font-weight: 700;
    padding: 0.4rem 1rem;
    border-radius: 20px;
    display: inline-block;
    margin-top: 0.6rem;
    font-size: 1.1rem;
  }
  .open {
    background: #00e676;
    color: #003300;
    box-shadow: 0 0 10px #00e676aa;
  }
  .closed {
    background: #f44336;
    color: #fff;
    box-shadow: 0 0 12px #f44336aa;
  }
  /* News feed styling */
  .news-list {
    list-style: none;
    padding-left: 0;
    max-height: 400px;
    overflow-y: auto;
  }
  .news-item {
    padding: 0.8rem 0;
    border-bottom: 1px solid #2c3643;
  }
  .news-item a {
    text-decoration: none;
    color: #00c6fb;
    font-weight: 600;
    font-size: 1rem;
  }
  .news-item a:hover {
    text-decoration: underline;
  }
  .news-source {
    font-size: 0.8rem;
    color: #62718a;
  }
  /* Market summary */
  .market-summary {
    font-size: 1rem;
    line-height: 1.5;
  }
  /* Footer */
  footer {
    text-align: center;
    padding: 1rem;
    font-size: 0.9rem;
    color: #62718a;
  }
  /* Responsive */
  @media (max-width: 680px) {
    .grid {
      flex-direction: column;
    }
  }
</style>
</head>
<body>

<header>
  BahadariTech Professional Trading Dashboard
</header>

<main>
  <section class="grid">

    <article class="card" id="localTimeCard">
      <h2>Bremen Local Time</h2>
      <div class="time" id="bremenTime">--:--:--</div>
      <div class="date" id="bremenDate">Loading date...</div>
    </article>

    <article class="card" id="londonTimeCard">
      <h2>London Time & Session</h2>
      <div class="time" id="londonTime">--:--:--</div>
      <div class="status closed" id="londonStatus">Checking...</div>
      <div style="margin-top: 0.6rem; color: #8ca3b9; font-size: 0.9rem;">
        Session Start: <span id="londonSessionStart">--:--</span> Bremen Time
      </div>
    </article>

    <article class="card" id="nyTimeCard">
      <h2>New York Time & Session</h2>
      <div class="time" id="nyTime">--:--:--</div>
      <div class="status closed" id="nyStatus">Checking...</div>
      <div style="margin-top: 0.6rem; color: #8ca3b9; font-size: 0.9rem;">
        Session Start: <span id="nySessionStart">--:--</span> Bremen Time
      </div>
    </article>

  </section>

  <section style="margin-top: 3rem;">
    <h2>Latest Economic News</h2>
    <ul class="news-list" id="newsList">
      <li>Loading news...</li>
    </ul>
  </section>

  <section style="margin-top: 3rem;">
    <h2>Top Currency Volatility (24h)</h2>
    <div id="volatilitySummary" class="market-summary">Loading...</div>
  </section>

  <section style="margin-top: 3rem; font-size: 0.9rem; color: #62718a;">
    <p>For detailed Economic Calendar, visit: <a href="https://www.investing.com/economic-calendar/" target="_blank" rel="noopener noreferrer">Investing.com Economic Calendar</a></p>
  </section>

</main>

<footer>
  &copy; 2025 BahadariTech | Trading dashboard updated every minute
</footer>

<script>
  const pad = (n) => n.toString().padStart(2, '0');
  const formatTime = (d) => `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
  const formatDate = (d) => d.toLocaleDateString('en-GB', { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' });

  // Convert Date to specific timezone date object
  function convertTZ(date, tzString) {
    return new Date(date.toLocaleString("en-US", { timeZone: tzString }));
  }

  // Market open logic (Mon-Fri)
  function isMarketOpen(now, startHour, startMinute, durationHours) {
    const day = now.getDay();
    if(day === 0 || day === 6) return false; // weekend
    const openTime = new Date(now);
    openTime.setHours(startHour, startMinute, 0, 0);
    const closeTime = new Date(openTime.getTime() + durationHours * 60 * 60 * 1000);
    return now >= openTime && now <= closeTime;
  }

  // Update clocks & sessions
  function updateTimes() {
    const nowUTC = new Date();

    // Bremen
    const nowBremen = convertTZ(nowUTC, "Europe/Berlin");
    document.getElementById('bremenTime').textContent = formatTime(nowBremen);
    document.getElementById('bremenDate').textContent = formatDate(nowBremen);

    // London
    const nowLondon = convertTZ(nowUTC, "Europe/London");
    document.getElementById('londonTime').textContent = formatTime(nowLondon);

    const londonOpen = isMarketOpen(nowLondon, 8, 0, 8.5);
    const londonStatus = document.getElementById('londonStatus');
    if(londonOpen) {
      londonStatus.textContent = "Market Open";
      londonStatus.className = "status open";
    } else {
      londonStatus.textContent = "Market Closed";
      londonStatus.className = "status closed";
    }
    document.getElementById('londonSessionStart').textContent = "09:00";

    // New York
    const nowNY = convertTZ(nowUTC, "America/New_York");
    document.getElementById('nyTime').textContent = formatTime(nowNY);

    const nyOpen = isMarketOpen(nowNY, 8, 30, 8);
    const nyStatus = document.getElementById('nyStatus');
    if(nyOpen) {
      nyStatus.textContent = "Market Open";
      nyStatus.className = "status open";
    } else {
      nyStatus.textContent = "Market Closed";
      nyStatus.className = "status closed";
    }
    document.getElementById('nySessionStart').textContent = "14:30";
  }

  // News API fetch - Using Finnhub.io free plan demo token (replace with your own key)
  async function fetchNews() {
    const newsList = document.getElementById('newsList');
    newsList.innerHTML = "<li>Loading news...</li>";

    try {
      // Using Finnhub Crypto/Forex news endpoint - You need to replace with your own API key for production
      const apiKey = 'sandbox_c0v3knqad3if8q3nfi80'; // demo sandbox key (limited)
      const url = `https://finnhub.io/api/v1/news?category=forex&token=${apiKey}`;

      const res = await fetch(url);
      if(!res.ok) throw new Error('Failed to fetch news');

      const newsData = await res.json();

      newsList.innerHTML = ''; // clear loading

      newsData.slice(0, 8).forEach(item => {
        const li = document.createElement('li');
        li.classList.add('news-item');
        li.innerHTML = `<a href="${item.url}" target="_blank" rel="noopener noreferrer">${item.headline}</a><div class="news-source">${item.source} - ${new Date(item.datetime * 1000).toLocaleString()}</div>`;
        newsList.appendChild(li);
      });
    } catch(err) {
      newsList.innerHTML = `<li>Unable to load news. Please try again later.</li>`;
      console.error('News fetch error:', err);
    }
  }

  // Fake volatility data - Replace with real API if you want
  function updateVolatility() {
    const volElem = document.getElementById('volatilitySummary');
    const sampleData = [
      {pair: "EUR/USD", volatility: "0.75%"},
      {pair: "GBP/USD", volatility: "0.92%"},
      {pair: "USD/JPY", volatility: "0.68%"},
      {pair: "AUD/USD", volatility: "0.83%"},
      {pair: "USD/CAD", volatility: "0.77%"}
    ];

    let html = '<ul style="padding-left: 1rem;">';
    sampleData.forEach(item => {
      html += `<li><strong>${item.pair}</strong>: ${item.volatility} (24h)</li>`;
    });
    html += '</ul>';

    volElem.innerHTML = html;
  }

  // Initialize everything
  function init() {
    updateTimes();
    fetchNews();
    updateVolatility();
    setInterval(() => {
      updateTimes();
    }, 1000);

    // Refresh news every 5 minutes
    setInterval(fetchNews, 300000);
  }

  init();

</script>
</body>
</html>
