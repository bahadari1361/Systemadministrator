<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Market Sessions & Timezone Dashboard</title>
<style>
  /* Modern clean styling */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #f0f0f0;
    margin: 0; padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  h1 {
    margin-bottom: 0.2em;
    color: #00d8ff;
  }
  .container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 30px;
    max-width: 900px;
    width: 100%;
  }
  .card {
    background: #222;
    border-radius: 12px;
    padding: 20px;
    flex: 1 1 250px;
    box-shadow: 0 4px 15px rgba(0, 216, 255, 0.3);
    min-width: 260px;
  }
  .time {
    font-size: 2.4em;
    font-weight: 700;
    margin: 0.2em 0 0.4em;
    letter-spacing: 0.04em;
  }
  .status {
    font-weight: 600;
    color: #0f0;
  }
  .status.closed {
    color: #f33;
  }
  small {
    color: #bbb;
  }
  footer {
    margin-top: 40px;
    font-size: 0.9em;
    color: #666;
  }
  a {
    color: #00d8ff;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
  /* Responsive */
  @media (max-width: 600px) {
    .container {
      flex-direction: column;
      gap: 20px;
    }
  }
</style>
</head>
<body>

<h1>Market Time & Sessions Dashboard</h1>

<div class="container">

  <div class="card" id="bremenCard">
    <h2>Bremen (Germany) Local Time</h2>
    <div class="time" id="bremenTime">--:--:--</div>
    <div id="bremenDate"></div>
  </div>

  <div class="card" id="londonCard">
    <h2>London Time & Market Session</h2>
    <div class="time" id="londonTime">--:--:--</div>
    <div>
      Status: <span id="londonStatus" class="status closed">Checking...</span>
    </div>
    <small>Trading Session Starts at: <span id="londonSessionStart">--:--</span> Bremen Time</small>
  </div>

  <div class="card" id="nyCard">
    <h2>New York Time & Market Session</h2>
    <div class="time" id="nyTime">--:--:--</div>
    <div>
      Status: <span id="nyStatus" class="status closed">Checking...</span>
    </div>
    <small>Trading Session Starts at: <span id="nySessionStart">--:--</span> Bremen Time</small>
  </div>

</div>

<div class="card" style="max-width: 900px; margin-top: 40px;">
  <h2>Economic News Feed</h2>
  <!-- Using a free economic calendar widget from investing.com (adjusted for modern usage) -->
  <iframe src="https://www.investing.com/economic-calendar/" 
          style="width: 100%; height: 400px; border:none; border-radius: 12px;" 
          title="Economic Calendar"></iframe>
</div>

<footer>
  Created by BahadariTech | Data times are shown in 24h format
</footer>

<script>
  function pad(num) {
    return num.toString().padStart(2, '0');
  }

  // Return formatted time string HH:MM:SS
  function formatTime(date) {
    return `${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())}`;
  }

  // Return formatted date string YYYY-MM-DD Weekday
  function formatDate(date) {
    return date.toLocaleDateString('en-GB', { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' });
  }

  function convertTZ(date, tzString) {
    return new Date(date.toLocaleString("en-US", { timeZone: tzString }));
  }

  // Trading session times in London time (BST/GMT)
  // London FX session approx: 08:00 - 16:30 London time
  // NY FX session approx: 13:30 - 22:00 London time

  // Helper: Check if market is open considering day of week and time range
  function isMarketOpen(now, startHour, startMinute, durationHours, tz) {
    const day = now.getDay(); // Sunday=0 ... Saturday=6
    // Markets open Monday(1) to Friday(5)
    if(day === 0 || day === 6) return false; // closed on weekends

    const openTime = new Date(now);
    openTime.setHours(startHour, startMinute, 0, 0);
    const closeTime = new Date(openTime.getTime() + durationHours * 60 * 60 * 1000);

    return now >= openTime && now <= closeTime;
  }

  function updateTimes() {
    const nowUTC = new Date();

    // Bremen Time (Europe/Berlin)
    const nowBremen = convertTZ(nowUTC, "Europe/Berlin");
    document.getElementById('bremenTime').textContent = formatTime(nowBremen);
    document.getElementById('bremenDate').textContent = formatDate(nowBremen);

    // London Time (Europe/London)
    const nowLondon = convertTZ(nowUTC, "Europe/London");
    document.getElementById('londonTime').textContent = formatTime(nowLondon);

    // NY Time (America/New_York)
    const nowNY = convertTZ(nowUTC, "America/New_York");
    document.getElementById('nyTime').textContent = formatTime(nowNY);

    // Check if London Market Open
    // London session: 08:00 to 16:30 London time (8.5 hours)
    const londonOpen = isMarketOpen(nowLondon, 8, 0, 8.5, "Europe/London");
    const londonStatusElem = document.getElementById('londonStatus');
    if (londonOpen) {
      londonStatusElem.textContent = "OPEN";
      londonStatusElem.classList.remove('closed');
      londonStatusElem.classList.add('status');
    } else {
      londonStatusElem.textContent = "CLOSED";
      londonStatusElem.classList.remove('status');
      londonStatusElem.classList.add('closed');
    }

    // Check if NY Market Open
    // NY session: 13:30 to 22:00 London time (8.5 hours)
    // We'll compare NY session converted to London time to handle correctly
    // But for simpler: check NY market in NY time 08:30 - 17:00 approx (8.5 hours)
    const nyOpen = isMarketOpen(nowNY, 8, 30, 8.5, "America/New_York");
    const nyStatusElem = document.getElementById('nyStatus');
    if (nyOpen) {
      nyStatusElem.textContent = "OPEN";
      nyStatusElem.classList.remove('closed');
      nyStatusElem.classList.add('status');
    } else {
      nyStatusElem.textContent = "CLOSED";
      nyStatusElem.classList.remove('status');
      nyStatusElem.classList.add('closed');
    }

    // Show session start times converted to Bremen time (Europe/Berlin)
    // London session starts at 08:00 London time
    let londonStart = new Date(nowLondon);
    londonStart.setHours(8, 0, 0, 0);
    const londonStartBremen = convertTZ(londonStart, "Europe/Berlin");
    document.getElementById('londonSessionStart').textContent = `${pad(londonStartBremen.getHours())}:${pad(londonStartBremen.getMinutes())}`;

    // NY session starts at 08:30 NY time
    let nyStart = new Date(nowNY);
    nyStart.setHours(8, 30, 0, 0);
    const nyStartBremen = convertTZ(nyStart, "Europe/Berlin");
    document.getElementById('nySessionStart').textContent = `${pad(nyStartBremen.getHours())}:${pad(nyStartBremen.getMinutes())}`;
  }

  // Update every second
  setInterval(updateTimes, 1000);
  updateTimes();
</script>

</body>
</html>
