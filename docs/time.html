<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trading Dashboard - No API Needed</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 10px; background: #f4f6f8; color: #333; }
    header { text-align: center; margin-bottom: 30px; }
    section { background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    h2 { border-bottom: 2px solid #007acc; padding-bottom: 5px; color: #007acc; }
    ul { list-style-type: none; padding-left: 0; }
    li { margin: 8px 0; }
    a { color: #007acc; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>

<header>
  <h1>Trading Dashboard</h1>
  <p>Times, Prices & News â€” No API Keys Needed</p>
</header>

<section id="marketSessions">
  <h2>Market Times</h2>
  <p>Bremen Time: <span id="bremenTime">--:--</span></p>
  <p>London Time: <span id="londonTime">--:--</span></p>
  <p>New York Time: <span id="nyTime">--:--</span></p>
</section>

<section id="currencyPrices">
  <h2>Top Currency Prices (Unofficial, updated every 5 min)</h2>
  <ul>
    <li>EUR/USD: <span id="eurusd">Loading...</span></li>
    <li>GBP/USD: <span id="gbpusd">Loading...</span></li>
    <li>USD/JPY: <span id="usdjpy">Loading...</span></li>
    <li>AUD/USD: <span id="audusd">Loading...</span></li>
    <li>USD/CAD: <span id="usdcad">Loading...</span></li>
  </ul>
</section>

<section id="economicNews">
  <h2>Latest Economic News (via RSS)</h2>
  <ul id="newsList">
    <li>Loading news...</li>
  </ul>
</section>

<section>
  <h2>Useful Links</h2>
  <ul>
    <li><a href="https://www.tradingview.com/" target="_blank">TradingView</a></li>
    <li><a href="https://www.forexfactory.com/calendar" target="_blank">ForexFactory Economic Calendar</a></li>
    <li><a href="https://www.investing.com/news/forex-news" target="_blank">Investing.com Forex News</a></li>
  </ul>
</section>

<script>
  // Update local times every second
  function updateTimes() {
    const now = new Date();
    document.getElementById('bremenTime').textContent = now.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    document.getElementById('londonTime').textContent = now.toLocaleTimeString('en-GB', { timeZone: 'Europe/London', hour: '2-digit', minute: '2-digit', second: '2-digit' });
    document.getElementById('nyTime').textContent = now.toLocaleTimeString('en-US', { timeZone: 'America/New_York', hour: '2-digit', minute: '2-digit', second: '2-digit' });
  }
  setInterval(updateTimes, 1000);
  updateTimes();

  // Fetch currency prices from a free public JSON source (unofficial, delay ~5 min)
  async function fetchCurrencyPrices() {
    try {
      const response = await fetch('https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/usd.json');
      const data = await response.json();
      const rates = data.usd;
      document.getElementById('eurusd').textContent = (1 / rates.eur).toFixed(5);
      document.getElementById('gbpusd').textContent = (1 / rates.gbp).toFixed(5);
      document.getElementById('usdjpy').textContent = rates.jpy.toFixed(2);
      document.getElementById('audusd').textContent = (1 / rates.aud).toFixed(5);
      document.getElementById('usdcad').textContent = rates.cad.toFixed(5);
    } catch (error) {
      console.error('Error fetching currency prices:', error);
      document.getElementById('eurusd').textContent = 'N/A';
      document.getElementById('gbpusd').textContent = 'N/A';
      document.getElementById('usdjpy').textContent = 'N/A';
      document.getElementById('audusd').textContent = 'N/A';
      document.getElementById('usdcad').textContent = 'N/A';
    }
  }
  fetchCurrencyPrices();
  setInterval(fetchCurrencyPrices, 5 * 60 * 1000); // update every 5 minutes

  // Fetch economic news from RSS using a public proxy (CORS-enabled)
  async function fetchEconomicNews() {
    const rssUrl = 'https://www.investing.com/rss/news_25.rss';
    const proxy = 'https://api.allorigins.win/get?url=' + encodeURIComponent(rssUrl);
    try {
      const response = await fetch(proxy);
      const data = await response.json();
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(data.contents, "application/xml");
      const items = xmlDoc.querySelectorAll('item');
      const newsList = document.getElementById('newsList');
      newsList.innerHTML = '';
      for(let i = 0; i < Math.min(5, items.length); i++) {
        const item = items[i];
        const title = item.querySelector('title').textContent;
        const link = item.querySelector('link').textContent;
        const li = document.createElement('li');
        li.innerHTML = `<a href="${link}" target="_blank">${title}</a>`;
        newsList.appendChild(li);
      }
    } catch (error) {
      console.error('Error fetching news:', error);
      document.getElementById('newsList').innerHTML = '<li>Failed to load news.</li>';
    }
  }
  fetchEconomicNews();
  setInterval(fetchEconomicNews, 10 * 60 * 1000); // update every 10 minutes
</script>

</body>
</html>
